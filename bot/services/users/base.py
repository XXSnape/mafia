from database.dao.users import UsersDao
from database.schemas.common import TgIdSchema
from general import settings
from general.collection_of_roles import get_data_with_roles
from general.commands import BotCommands
from general.groupings import Groupings
from general.text import (
    CONFIGURE_GAME_SECTION,
    REQUIRED_PERMISSIONS,
    ROLES_SELECTION,
)
from keyboards.inline.builder import generate_inline_kb
from keyboards.inline.buttons.common import HELP_BTN
from keyboards.inline.callback_factory.help import RoleCbData
from keyboards.inline.keypads.help import (
    HOW_TO_SET_UP_GAME_BTN,
    ROLES_SELECTION_BTN,
    get_roles_kb,
    go_back_to_options_kb,
    help_options_kb,
    to_help_kb,
)
from mafia.roles import Instigator, Warden
from services.base import RouterHelper
from utils.pretty_text import make_build, make_pretty


class BaseRouter(RouterHelper):
    async def greetings_to_user(self):
        await UsersDao(session=self.session).get_user_or_create(
            tg_id=TgIdSchema(tg_id=self.message.from_user.id)
        )
        await self.handle_help()

    async def handle_help(self):
        await self.message.delete()
        text = (
            "ü§ñ–ß—Ç–æ –∑–∞ –±–æ—Ç?\n\n"
            "üé©–≠—Ç–æ –±–æ—Ç-–≤–µ–¥—É—â–∏–π –¥–ª—è –∏–≥—Ä—ã –≤ –ú–∞—Ñ–∏—é —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–æ–ª–µ–π, "
            "–ø—Ä–µ–¥–ª–∞–≥–∞—é—â–∏–π —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ –æ–±—â–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã!"
        )
        await self.message.answer(
            make_build(text), reply_markup=help_options_kb()
        )

    async def view_roles(self):
        await self.callback.message.delete()
        await self.callback.message.answer(
            text=(
                make_build(
                    f"{make_pretty('‚ÑπÔ∏è–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–æ–ª—è—Ö:')}\n\n"
                    "üö´ –í —Å–ª—É—á–∞–µ –ø–æ—Ä–∞–∂–µ–Ω–∏—è –¥–µ–Ω—å–≥–∏ –Ω–∏ –∑–∞ —á—Ç–æ –Ω–µ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è\n\n"
                    "ü§î –†–æ–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –Ω–µ –º–æ–≥—É—Ç –≤—ã–±–∏—Ä–∞—Ç—å —Å–µ–±—è\n\n"
                    "ü™ô –ó–∞ –ø–æ–≤–µ—à–µ–Ω–∏—è –¥–Ω—ë–º –≤—ã–ø–ª–∞—á–∏–≤–∞—é—Ç—Å—è –¥–µ–Ω—å–≥–∏\n\n"
                    "ü§ù –£ —Ä–æ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ—é–∑–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å—Ç—É–ø—è—Ç –≤ –æ—Å–Ω–æ–≤–Ω—É—é –¥–æ–ª–∂–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏ –≥–ª–∞–≤–∞—Ä—è"
                )
            ),
            reply_markup=get_roles_kb(),
        )

    async def how_to_start_game(self):
        text = (
            f"{make_pretty('üé≤–ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É?')}\n\n\n"
            "üë®‚Äçüë©‚Äçüëß‚Äçüëß–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –≥—Ä—É–ø–ø–∞—Ö (–∏ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞—Ö), –ø–æ—ç—Ç–æ–º—É –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –µ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ —á–∞—Ç.\n"
            "–¢–∞–∫ –∫–∞–∫ –∏–≥—Ä–æ–∫–æ–≤ –Ω—É–∂–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å, "
            "–≤—Ä–µ–º–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—ã–≤—à–∏—Ö –∏ –Ω–µ–∏–≥—Ä–∞—é—â–∏—Ö –∏–ª–∏ –¥–∞–∂–µ "
            f"–∂–∏–≤—ã—Ö (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´{ROLES_SELECTION}¬ª), –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –≤–∞–∂–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞—Ö, "
            f"–±–æ—Ç—É –Ω—É–∂–Ω–æ –≤—ã–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∞:\n\n{REQUIRED_PERMISSIONS}\n\n"
            "–ë–µ–∑ —ç—Ç–æ–≥–æ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.\n\n"
            f"¬©Ô∏è–ï—Å–ª–∏ —Å –ø—Ä–∞–≤–∞–º–∏ –≤—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É /{BotCommands.registration.name},"
            " —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω–∞ –¥–ª–∏—Ç—Å—è 2 –º–∏–Ω—É—Ç—ã, "
            "–ø–æ—Ç–æ–º –∏–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–¥–ª–∏—Ç—å —ç—Ç–æ –≤—Ä–µ–º—è, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏–ª–∏ "
            f"—Å–æ–∑–¥–∞—Ç–µ–ª—å –∏–≥—Ä—ã –º–æ–≥—É—Ç –≤–≤–µ—Å—Ç–∏ /{BotCommands.extend.name} –∏ —É–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ 30 —Å–µ–∫—É–Ω–¥.\n\n"
            f"üõéÔ∏è–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å, –≤–≤–µ–¥—è –∫–æ–º–∞–Ω–¥—É /{BotCommands.revoke.name}. –ú–∞–∫—Å–∏–º—É–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–ª–∏—Ç—Å—è 5 –º–∏–Ω—É—Ç, "
            "–∑–∞—Ç–µ–º –∏–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—ë—Ç—Å—è. –ò–≥—Ä—É –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–Ω—å—à–µ, –Ω–∞–∂–∞–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â—É—é "
            "–∫–Ω–æ–ø–∫—É –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ –Ω–∞—á–∞–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.\n\n"
            f"üéüÔ∏è–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ –º–æ–∂–Ω–æ –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–æ–¥ —ç—Ç–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º, "
            f"–∞ –≤—ã–π—Ç–∏ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã {BotCommands.leave.name}\n\n"
            f"‚ùóÔ∏è–ú–∏–Ω–∏–º—É–º –≤ –∏–≥—Ä–µ –º–æ–≥—É—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å {settings.mafia.minimum_number_of_players} —á–µ–ª–æ–≤–µ–∫–∞, "
            f"–º–∞–∫—Å–∏–º—É–º {settings.mafia.maximum_number_of_players}. –ï—Å–ª–∏ –∑–∞ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ –Ω–∞–±—Ä–∞–ª–æ—Å—å, "
            "–∏–≥—Ä–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è."
        )
        await self.callback.message.edit_text(
            text=make_build(text), reply_markup=to_help_kb()
        )

    async def what_are_bids(self):
        text = (
            f"{make_pretty('üÉè–ß—Ç–æ –∑–∞ —Å—Ç–∞–≤–∫–∏?')}\n\n\n"
            "üí∞–í–æ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ª—é–±–æ–π –∏–≥—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –Ω–µ–Ω—É–ª–µ–≤–æ–π –±–∞–ª–∞–Ω—Å, "
            f"–º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—É—é —Ä–æ–ª—å (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´{CONFIGURE_GAME_SECTION}¬ª).\n\n"
            "üé≤–¢–∞–∫ –∫–∞–∫ –∑–∞—Ä–∞–Ω–µ–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —Å–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥–µ—Ç –ø–æ –∏—Ç–æ–≥—É –≤ –∏–≥—Ä–µ, —Ä–æ–ª—å, –Ω–∞ "
            "–∫–æ—Ç–æ—Ä—É—é –ø–æ—Å—Ç–∞–≤–∏–ª –∏–≥—Ä–æ–∫, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–∞, –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–µ–Ω—å–≥–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è.\n\n"
            "‚úÖ–ï—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ –∑–∞–π–¥–µ—Ç, –∏ —Ä–æ–ª—å –±—É–¥–µ—Ç –≤ –∏–≥—Ä–µ, –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∏—Ç —ç—Ç—É —Ä–æ–ª—å, –∞ –¥–µ–Ω—å–≥–∏ —Å–ø–∏—à—É—Ç—Å—è.\n\n"
            "üòØ–¢–∞–∫–∂–µ —Å—Ç–∞–≤–∫–∏ —Å–µ—Ä—å—ë–∑–Ω–æ –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–æ, –∫–∞–∫–∏–µ –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ —Ä–æ–ª–∏ –±—É–¥—É—Ç –≤ –∏–≥—Ä–µ, –µ—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ —Ä–æ–ª–µ–π "
            f"–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —è–≤–Ω–æ –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —á–∞—Å—Ç–∏—á–Ω–æ (–æ–± —ç—Ç–æ–º –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´{CONFIGURE_GAME_SECTION}¬ª).\n\n"
            "üë•–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –∏–≥—Ä–∞—é—Ç 6 —á–µ–ª–æ–≤–µ–∫. 5 —Ä–æ–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ, –æ—Å—Ç–∞–ª—Å—è 1 —Å–ª–æ—Ç. "
            "–ï—Å–ª–∏ —Å—Ç–∞–≤–æ–∫ –Ω–µ –±—É–¥–µ—Ç, —Ç–æ —Ä–æ–ª—å –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω–∞ —Ä–∞–Ω–¥–æ–º–Ω–æ, –∞ –µ—Å–ª–∏ —Å—Ç–∞–≤–∫–∏ –µ—Å—Ç—å –∏ –æ–Ω–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, "
            f"—Ç–∞–∫–∏–µ: –∑–∞ {make_pretty(Instigator.role)} "
            f"–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ 500, –∑–∞ {make_pretty(Warden.role)} "
            f"600, —Ç–æ–≥–¥–∞ 6–æ–π —Ä–æ–ª—å—é –±—É–¥–µ—Ç "
            f"{make_pretty(Warden.role)} (–æ–± —ç—Ç–∏—Ö —Ä–æ–ª—è—Ö –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–†–æ–ª–∏üé≠¬ª).\n\n"
            f"üî•–í —Å–ª—É—á–∞–µ –¥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã (—Å–±–æ–π —Ç–µ–ª–µ–≥—Ä–∞–º, "
            f"—Ä–∞—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã –∏ —Ç.–¥.) "
            f"–¥–µ–Ω—å–≥–∏ –∑–∞ —Å–¥–µ–ª–∞–Ω–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –≤–µ—Ä–Ω—É—Ç—Å—è –≤ –ø–æ–ª–Ω–æ–º –æ–±—ä–µ–º–µ."
        )
        await self.callback.message.edit_text(
            text=make_build(text),
            reply_markup=generate_inline_kb(
                data_with_buttons=[
                    ROLES_SELECTION_BTN,
                    HOW_TO_SET_UP_GAME_BTN,
                    HELP_BTN,
                ]
            ),
        )

    async def how_to_play(self):
        text = (
            f"{make_pretty('üéÆ–ö–∞–∫ –∏–≥—Ä–∞—Ç—å?')}\n\n\n"
            "üé¨–ò–≥—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç—Ç–∞–ø–æ–≤:\n\n"
            "üéÅ1) –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ\n\n"
            "–ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫—Ä–∞—Ç–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–æ–ª–∏, "
            "–∑–Ω–∞–∫–æ–º–∏—Ç —Å —Å–æ—é–∑–Ω–∏–∫–∞–º–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö "
            "—Å —Å–æ–∫–æ–º–∞–Ω–¥–Ω–∏–∫–∞–º–∏ –ø–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ.\n\n"
            "üåÉ2) –ù–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ –Ω–æ—á–∏\n\n"
            "–ù–æ—á—å—é –±–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –∏–≥—Ä–æ–∫–∞–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç "
            f"–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –ø–æ–ª—É—á–µ–Ω–Ω–æ–π —Ä–æ–ª–∏. –ï—Å–ª–∏ —Ä–æ–ª—å –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –Ω–æ—á—å—é, —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –Ω–µ "
            f"–±—É–¥–µ—Ç (–ø–æ–¥—Ä–æ–±–Ω–µ–µ –≤ ¬´{ROLES_SELECTION}¬ª).\n\n"
            "üëø–ü—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞ –∏–≥—Ä—É –º–æ–∂–Ω–æ 1 —Ä–∞–∑. "
            "–í —Å–ª—É—á–∞–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è "
            "–¥–µ–π—Å—Ç–≤–∏—è, –∏–≥—Ä–æ–∫ –≤—ã–±—ã–≤–∞–µ—Ç –∏–∑ –∏–≥—Ä—ã –¥–æ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–π –Ω–æ—á–∏ –∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –ø–æ –∏—Ç–æ–≥—É "
            "–≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–µ–≥–æ-–ª–∏–±–æ.\n\n"
            "üìÖ3) –ù–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ –¥–Ω—è\n\n"
            "–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–æ—á–Ω—ã—Ö –±–∞—Ç–∞–ª–∏–π –±–æ—Ç –ø–æ–¥–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–∏, —Å–æ–æ–±—â–∞–µ—Ç –æ –ø–æ–≥–∏–±—à–∏—Ö –∏ "
            "–ø—Ä–∏—Å—ã–ª–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö –≤ –≥—Ä—É–ø–ø—É –∏ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞–º. "
            "–ñ–∏—Ç–µ–ª–∏ –≤ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –æ–±—Å—É–∂–¥–∞—é—Ç –ø—Ä–æ—à–µ–¥—à—É—é –Ω–æ—á—å, –≤—Å—è—á–µ—Å–∫–∏ –ø—ã—Ç–∞—é—Ç—Å—è —É–±–µ–¥–∏—Ç—å –¥—Ä—É–≥–∏—Ö "
            "—É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —Å–≤–æ–µ–π –ø—Ä–∞–≤–æ—Ç–µ –∏ –Ω–µ–≤–∏–Ω–æ–≤–Ω–æ—Å—Ç–∏.\n\n"
            "ü§ù4) –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ –∏–≥—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –ø–æ–≤–µ—Å–∏—Ç—å\n\n"
            "–í –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ–ø—Ä–æ—Å–Ω–∏–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∂–∏–≤–æ–≥–æ "
            "—É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–≥—Ä—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –ø–æ–≤–µ—à–µ–Ω–∏—è. –£—á–∞—Å—Ç–∏–µ –≤ –Ω–µ–º –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.\n\n"
            "üíÄ5) –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ –ø–æ–≤–µ—à–µ–Ω–∏–∏\n\n"
            "–≠—Ç–æ—Ç —ç—Ç–∞–ø –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–∞, –Ω–∞–±—Ä–∞–≤—à–µ–≥–æ "
            "–±–û–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤ "
            "–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ.\n"
            "–ï—Å–ª–∏ –∂–µ —Ç–∞–∫–æ–π –∫–∞–Ω–¥–∏–¥–∞—Ç –∏–º–µ–µ—Ç—Å—è, –≤ –≥—Ä—É–ø–ø—É –±–æ—Ç "
            "—Å–∫–∏–¥—ã–≤–∞–µ—Ç –æ–ø—Ä–æ—Å —Å 2-–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞: "
            "–ø–æ–≤–µ—Å–∏—Ç—å –∏–ª–∏ –Ω–µ—Ç. –ï—Å–ª–∏ –∑–∞ –ø–æ–≤–µ—à–µ–Ω–∏–µ –±—É–¥–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ, –∏–≥—Ä–æ–∫ –±—É–¥–µ—Ç –∫–∏–∫–Ω—É—Ç –∏–∑ –∏–≥—Ä—ã.\n"
            "–ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞ –ø–æ–≤–µ—à–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ–ø—Ä–æ—Å–µ.\n\n"
            "‚ÑπÔ∏è–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:\n\n"
            "üîö1) –ò–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –ø–æ–±–µ–∂–¥–∞–µ—Ç –æ–¥–Ω–∞ –∏–∑ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫. "
            f"–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´{ROLES_SELECTION}¬ª.\n\n"
            "Ô∏èüéôÔ∏è2) –ü–æ—Å–ª–µ –≤—ã–±—ã–≤–∞–Ω–∏—è –∏–∑ –∏–≥—Ä—ã –Ω–æ—á—å—é, –±—ã–≤—à–∏–π —É—á–∞—Å—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç –Ω–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ "
            "—Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–∏—á–∫—É –±–æ—Ç—É, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å–ª–∞–Ω–æ –≤ –æ–±—â–∏–π —á–∞—Ç.\n\n"
            f"ü§ë3) –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø–æ–±–µ–¥–∏—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ —É–º–µ—Ä –¥–Ω—ë–º –∏–ª–∏ –Ω–æ—á—å—é "
            f"(–ø–æ–¥–æ–±–Ω–µ–µ –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –Ω–∞–≥—Ä–∞–¥ –≤ ¬´{ROLES_SELECTION}¬ª).\n\n"
            f"Ô∏èüí¨4) –í–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã –∫–æ–º–º—É–Ω–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø—Ä—è–º–æ –≤ –±–æ—Ç–µ –º–æ–≥—É—Ç —Å–æ—é–∑–Ω–∏–∫–∏ "
            f"–∏ –≤—Å–µ —á–ª–µ–Ω—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ ¬´{Groupings.criminals.value.name}¬ª"
        )
        await self.callback.message.edit_text(
            text=make_build(text),
            reply_markup=generate_inline_kb(
                data_with_buttons=[ROLES_SELECTION_BTN, HELP_BTN]
            ),
        )

    async def how_to_set_up_game(self):
        text = (
            f"{make_pretty('‚öôÔ∏è–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–≥—Ä—É?')}\n\n\n"
            f"–ß—Ç–æ–±—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–≥—Ä—É, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /{BotCommands.my_settings.name} "
            f"–≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç—É.\n\n"
            "üõ†–í–∏–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫:\n\n"
            "üóÉÔ∏è1) –ü–æ—Ä—è–¥–æ–∫ —Ä–æ–ª–µ–π\n\n"
            "üë•–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –≤–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è –æ—Ç –∏–≥—Ä—ã –∫ –∏–≥—Ä–µ, –ø–æ—ç—Ç–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º "
            "–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —è–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, "
            f"–∫–∞–∫–∏–µ —Ä–æ–ª–∏ –±—É–¥—É—Ç –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —á–∏—Å–ª–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤. "
            f"–ï—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ —Ä–æ–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ (–º–∞–∫—Å–∏–º—É–º "
            f"{settings.mafia.maximum_number_of_players}), —Å—Ç–∞–≤–∫–∏ –Ω–µ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ "
            "–æ—Ç–±–æ—Ä —Ä–æ–ª–µ–π –≤ –∏–≥—Ä—É. –ï—Å–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, –¥–µ–ª–æ –∑–∞ —Å—Ç–∞–≤–∫–∞–º–∏ –∏ —Ä–∞–Ω–¥–æ–º–æ–º.\n\n"
            "‚ùóÔ∏è¬´–ë–∞–∑–æ–≤—ã–µ —Ä–æ–ª–∏¬ª –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–µ–ª—å–∑—è, "
            "–≤–µ–¥—å –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∫–∞–∂–¥–æ–π –∏–≥—Ä–µ. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è "
            "–æ –Ω–∏—Ö –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ —Å—Ä–∞–∑—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É. "
            "–¢–∞–∫–∂–µ –Ω–µ–ª—å–∑—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –¥–ª—è —Ä–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω–µ–µ –±—ã–ª–∏ –∑–∞–±–∞–Ω–µ–Ω—ã. "
            f"–†–æ–ª—å –∏–∑ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ ¬´{Groupings.criminals.value.name}¬ª –º–æ–∂–µ—Ç –±—ã—Ç—å "
            f"—Ç–æ–ª—å–∫–æ –Ω–∞ –∫–∞–∂–¥–æ–π 4–æ–π –ø–æ–∑–∏—Ü–∏–∏: 4, 8, 12 –∏ —Ç.–¥\n\n"
            "‚ùå2) –ó–∞–±–∞–Ω–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏\n\n"
            "üòÅ–ù–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –∏–≥—Ä–∞—Ç—å —Å—Ä–∞–∑—É —Å–æ –≤—Å–µ–º–∏ —Ä–æ–ª—è–º–∏. "
            '–ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–∏–≥—Ä–∞—Ç—å –≤ "—Å–∞–º—É—é –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—É—é" –º–∞—Ñ–∏—é '
            "—Å 4 —Ä–æ–ª—è–º–∏ (–º–∞—Ñ–∏—è, –º–∏—Ä–Ω—ã–π, –¥–æ–∫—Ç–æ—Ä, –∫–æ–º–∏—Å—Å–∞—Ä) –Ω–æ —Å "
            "–∫–æ–º–ø–∞–Ω–∏–µ–π –∏–∑ 20 —á–µ–ª–æ–≤–µ–∫, —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ—Å—Ç—å!\n\n"
            "–ë–æ—Ç –ø—Ä–∏—à–ª–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å, "
            "–∫–∞–∫–∏–µ —Ä–æ–ª–∏ –≤ –∏–≥—Ä–µ –Ω–µ —Å–º–æ–≥—É—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å. "
            "–ù–æ —É—á–∞—Å—Ç–∏–µ –Ω–µ –≤—Å–µ—Ö —Ä–æ–ª–µ–π –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å. "
            "–ï—Å—Ç—å —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ ¬´–±–∞–∑–æ–≤—ã–µ —Ä–æ–ª–∏¬ª, –∫–æ—Ç–æ—Ä—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –±—É–¥—É—Ç –≤ –ª—é–±–æ–π –∏–≥—Ä–µ.\n\n"
            "üåâ3) –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ—á–∏\n\n"
            "–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–µ–∫—É–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–æ—á–∏\n\n"
            "üìÖ4) –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–Ω—è\n\n"
            "–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–µ–∫—É–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–Ω—è\n\n\n"
            f"{make_pretty("üîß–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø–µ?")}\n\n\n"
            "üë©‚Äçüíº–í –≥—Ä—É–ø–ø–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã, "
            "–æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∏—Ö.\n\n"
            "ü§ñ–°—É—â–µ—Å—Ç–≤—É—é—Ç 2 —Å–ø–æ—Å–æ–±–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –≥—Ä—É–ø–ø—ã:\n\n"
            "1) –ü—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã –ª—é–±–æ–≥–æ –µ–µ —Å–æ–∑–¥–∞—Ç–µ–ª—è\n"
            "2) –ü—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π "
            "–ø–æ—Å–ª–µ–¥–Ω–∏–º –≤—ã—Å—Ç–∞–≤–∏–ª —ç—Ç–æ—Ç –ø—É–Ω–∫—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≥—Ä—É–ø–ø—ã\n\n"
            f"‚úÖ–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –≤–≤–µ–¥–∏—Ç–µ "
            f"/{BotCommands.settings.name} –≤ –≥—Ä—É–ø–ø—É. "
            f"–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–æ—Ç –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏—à–ª–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å."
        )
        await self.callback.message.edit_text(
            text=make_build(text),
            reply_markup=to_help_kb(),
        )

    async def how_to_see_statistics(self):
        text = (
            f"{make_pretty('üìà–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É?')}\n\n\n"
            f"ü•á1) –ü–æ—Å–ª–µ –Ω–æ—á–∏ –±–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –≤ –ª–∏—á–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–µ–π—Å—Ç–≤–∏—è—Ö, "
            f"–∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∫–∏–º-–ª–∏–±–æ –æ–±—Ä–∞–∑–æ–º –ø–æ–≤–ª–∏—è–ª–∏ –Ω–∞ –∏–≥—Ä—É. "
            f"–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–æ–∫—Ç–æ—Ä –≤—ã–ª–µ—á–∏–ª –∏–≥—Ä–æ–∫–∞,"
            f" –∫–æ—Ç–æ—Ä–æ–≥–æ –∏ –Ω–µ –ø—ã—Ç–∞–ª–∏—Å—å —É–±–∏—Ç—å, –µ–º—É –æ–± —ç—Ç–æ–º –Ω–µ —Å–æ–æ–±—â–∞—Ç.\n\n"
            f"üë§2) –ü–æ –∫–æ–º–∞–Ω–¥–µ /{BotCommands.profile.name} –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è "
            f"–±–æ—Ç –ø—Ä–∏—à–ª–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–µ–π—à—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–≥—Ä–æ–∫–µ, –µ–≥–æ –∏–≥—Ä–∞—Ö –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö\n\n"
            f"üìä3) –ü–æ –∫–æ–º–∞–Ω–¥–µ /{BotCommands.statistics.name} –≤ —Å–æ–æ–±—â–µ–Ω–∏—è "
            f"–≥—Ä—É–ø–ø—ã –±–æ—Ç –ø—Ä–∏—à–ª–µ—Ç –≤ –æ–±—â–∏–π —á–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥—Ä—É–ø–ø–µ –∏ —Ä–µ–π—Ç–∏–Ω–≥–µ –∏–≥—Ä–æ–∫–æ–≤"
        )
        await self.callback.message.edit_text(
            text=make_build(text),
            reply_markup=to_help_kb(),
        )

    @staticmethod
    def join(strings: list[str] | None):
        if strings is None:
            return "–ù–µ—Ç"
        return "\n‚óè " + "\n‚óè ".join(strings)

    async def get_details_about_role(
        self, callback_data: RoleCbData
    ):
        current_role = get_data_with_roles(callback_data.role_id)
        description = current_role.role_description
        if current_role.is_alias:
            text = (
                f"–†–æ–ª—å —è–≤–ª—è–µ—Ç—Å—è —Å–æ—é–∑–Ω–æ–π –∫ {make_pretty(current_role.boss_name)}. "
                f"–í —Å–ª—É—á–∞–µ —Å–º–µ—Ä—Ç–∏ –≥–ª–∞–≤–∞—Ä—è –≤—Å—Ç—É–ø–∞–µ—Ç –≤ –¥–æ–ª–∂–Ω–æ—Å—Ç—å —Ä–∞–Ω–¥–æ–º–Ω—ã–π —Å–æ—é–∑–Ω–∏–∫\n\n"
            )
            if current_role.is_mass_mailing_list:
                text += "–ú–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –≤—ã–±–æ—Ä –Ω–æ—á—å—é"
            else:
                text += "–ù–µ –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –≤—ã–±–æ—Ä –Ω–æ—á—å—é"
        else:
            text = (
                f"üèÜ–£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã: {description.wins_if.capitalize()}\n\n"
                f"üí™–û—Å–æ–±—ã–π –Ω–∞–≤—ã–∫: {(description.skill or "–ù–µ—Ç")}\n\n"
                f"üí∞–ü–ª–∞—Ç—è—Ç –∑–∞: {self.join(description.pay_for)}\n\n"
                f"üö´–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: {self.join(description.limitations)}\n\n"
                f"‚ú®–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: {self.join(description.features)}"
            )

        common_text = (
            f"ü™™–ù–∞–∑–≤–∞–Ω–∏–µ: {make_pretty(current_role.role)}\n\n"
            f"üé≠–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: {make_build(current_role.grouping.value.name)}\n\n"
        )
        purpose_of_grouping = None
        if current_role.grouping in (
            Groupings.criminals,
            Groupings.killer,
        ):
            purpose_of_grouping = (
                "–°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã "
                "–ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–µ–π –≥—Ä—É–ø–ø—ã —Å—Ç–∞–ª–æ –±–æ–ª—å—à–µ "
                "–∏–ª–∏ —Ä–∞–≤–Ω–æ –æ—Å—Ç–∞–ª—å–Ω—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∏–≥—Ä—ã"
            )
        elif current_role.grouping == Groupings.civilians:
            purpose_of_grouping = (
                f"–£–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ {Groupings.criminals.value.name} "
                f"–∏ {Groupings.killer.value.name}"
            )
        if purpose_of_grouping:
            common_text += (
                f"üéØ–¶–µ–ª—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏: {purpose_of_grouping}\n\n"
            )

        result_text = common_text + text

        await self.callback.message.delete()
        await self.callback.message.answer_photo(
            photo=current_role.photo,
            caption=make_build(result_text),
            reply_markup=go_back_to_options_kb(),
        )
